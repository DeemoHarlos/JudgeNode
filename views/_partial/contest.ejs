<%
	var problem_list = problem_config.list;
	for (var row = 0 ; row < problem_list.length; row++)
		problem_list[row].score = -1;
	for (var row = 0 ; row < problem_config.score.length; row++ ) {
		var tmp = problem_list.filter(function(x) { 
			return x.pid === problem_config.score[row].pid
		});
		if (tmp.length == 0)
			continue;
		tmp[0].score = problem_config.score[row].score;
		tmp[0].submits = problem_config.score[row].submits;
	}
%>
<div class="header">
	<h1 class='article-title'>Contest</h1>
    <h2><%- contest_config.ttl %></h2>
</div>
<div class="content">

<div class="pure-menu pure-menu-horizontal">
	<ul class="pure-menu-list">
		<li class="pure-menu-item"><a class="pure-menu-link" href='/scoreboard/contest/<%- contest_config.cid %>'><%= __('Scoreboard') %></a></li>
	</ul>
</div>


<h2 id="-">考試規則</h2>
	<ul>
	<li>務必攜帶學生證到場考試。</li>
	<li>考試期間無法開啟之前上傳的程式碼並禁用外部網路。</li>
	<li>考試可以攜帶任何紙本參考資料，禁止使用電子產品或儲存裝置，如果需要字典請向助教索取。</li>
	<li>每一題最多能上傳 15 次。某一題上傳多於 15 次，該題將不予計分 (仍然提供上傳以應變特殊情況)。</li>
	<li>請勿將帳號轉交給其他人代考，遭查獲作弊者將依校規嚴懲。</li>
	</ul>
<% if (sysmsg.length != 0) { %>
	<div class="sysmsg"><%- sysmsg %></div>	
<% } else { %>
	<table class="pure-table pure-table-bordered" style="width: 100%;">
		<thead>
			<tr>
				<th></th>
	           	<th>#</th>
	            <th><%= __('Problem Title') %></th>
	            <th><%= __('Subs') %></th>
	            <th><%= __('#Remain') %></th>
			</tr>
		</thead>
		<tbody>
		</tbody>
		<% for (var row = 0; row < problem_list.length; row++ ) { %>
			<% 
				var score = problem_list[row].score; 
				var submits = problem_list[row].submits == undefined ? 0 : problem_list[row].submits;
			%>
			<tr>
				<td>
					<% if (score == 100) { %>
						<i class="fa fa-check" style="color: green;"></i>
					<% } else if (score >= 0) { %>
						<i class="fa fa-times" style="color: red;"></i>
					<% } %>
				</td>
				<td><%- problem_list[row].pid %></td>
				<td><a href="<%- "/problem/" + contest_config.cid + "/" + problem_list[row].pid %>" ><%- problem_list[row].pid %>. <%- problem_list[row].ttl %></a></td>
				<td></td>
				<td><%- config.CONTEST_SUBMIT_LIMIT - submits %></td>
			</tr>
			
		<% } %>
		</tbody>
	</table>
<% } %>
</div>